{% extends "admin/base_site.html" %}
{% load i18n static admin_urls %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block nav-sidebar %}{% endblock %}

{% block content %}
<div style="padding: 20px;">
    <!-- Welcome Section -->
    <div style="background: linear-gradient(135deg, #6F4E37 0%, #5D4037 100%); color: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 8px 32px rgba(0,0,0,0.1);">
        <div style="display: flex; align-items: center; justify-content: between; flex-wrap: wrap;">
            <div>
                <h1 style="color: #FFD700; margin: 0 0 10px 0; font-size: 28px; font-weight: 600; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">Welcome to One Cup Initiative Admin Panel</h1>
                <p style="color: #F5F5DC; margin: 0; font-size: 16px;">Manage your coffee farmers, events, content, and more from this central dashboard.</p>
            </div>
            <div style="text-align: right; color: #F5F5DC;">
                <div style="font-size: 14px;">Last login:</div>
                <div style="font-size: 18px; font-weight: 600; color: #FFD700;">{{ user.last_login|date:"M d, Y H:i" }}</div>
            </div>
        </div>
    </div>

    <!-- Quick Stats -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
        {% if stats %}
            <div style="background: linear-gradient(135deg, #28a745 60%, #7b3f00 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                <i class="fas fa-users" style="font-size: 32px; margin-bottom: 10px; opacity: 0.9;"></i>
                <div style="font-size: 28px; font-weight: 700; margin-bottom: 5px;">{{ stats.farmers_count|default:0 }}</div>
                <div style="font-size: 14px; opacity: 0.9;">Total Farmers</div>
            </div>
            
            <div style="background: linear-gradient(135deg, #d4af37 60%, #7b3f00 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                <i class="fas fa-dollar-sign" style="font-size: 32px; margin-bottom: 10px; opacity: 0.9;"></i>
                <div style="font-size: 28px; font-weight: 700; margin-bottom: 5px;">${{ stats.total_donations|default:0|floatformat:0 }}</div>
                <div style="font-size: 14px; opacity: 0.9;">Total Donations</div>
            </div>
            
            <div style="background: linear-gradient(135deg, #17a2b8 60%, #7b3f00 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                <i class="fas fa-calendar-alt" style="font-size: 32px; margin-bottom: 10px; opacity: 0.9;"></i>
                <div style="font-size: 28px; font-weight: 700; margin-bottom: 5px;">{{ stats.upcoming_events|default:0 }}</div>
                <div style="font-size: 14px; opacity: 0.9;">Upcoming Events</div>
            </div>
            
            <div style="background: linear-gradient(135deg, #6f42c1 60%, #7b3f00 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                <i class="fas fa-newspaper" style="font-size: 32px; margin-bottom: 10px; opacity: 0.9;"></i>
                <div style="font-size: 28px; font-weight: 700; margin-bottom: 5px;">{{ stats.blog_posts|default:0 }}</div>
                <div style="font-size: 14px; opacity: 0.9;">Blog Posts</div>
            </div>
        {% endif %}
    </div>

    <!-- Quick Actions -->
    <div style="background: white; padding: 25px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 4px 16px rgba(0,0,0,0.1);">
        <h2 style="color: #110906; margin: 0 0 20px 0; font-size: 20px; font-weight: 600; border-bottom: 2px solid #d4af37; padding-bottom: 10px;">
            <i class="fas fa-bolt" style="color: #d4af37; margin-right: 8px;"></i>
            Quick Actions
        </h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <a href="{% url 'admin:farmers_farmer_add' %}" style="display: block; background: linear-gradient(135deg, #F5E6D3 0%, #E8D5C4 100%); border: 2px solid #8B4513; border-radius: 8px; padding: 15px; text-decoration: none; color: #3E2723; transition: all 0.3s ease; text-align: center;">
                <i class="fas fa-plus-circle" style="color: #28a745; font-size: 24px; margin-bottom: 8px; display: block;"></i>
                <strong style="color: #3E2723;">Add New Farmer</strong>
            </a>
            
            <a href="{% url 'admin:events_event_add' %}" style="display: block; background: linear-gradient(135deg, #F5E6D3 0%, #E8D5C4 100%); border: 2px solid #8B4513; border-radius: 8px; padding: 15px; text-decoration: none; color: #3E2723; transition: all 0.3s ease; text-align: center;">
                <i class="fas fa-calendar-plus" style="color: #17a2b8; font-size: 24px; margin-bottom: 8px; display: block;"></i>
                <strong style="color: #3E2723;">Create Event</strong>
            </a>
            
            <a href="{% url 'admin:blog_blogpost_add' %}" style="display: block; background: linear-gradient(135deg, #F5E6D3 0%, #E8D5C4 100%); border: 2px solid #8B4513; border-radius: 8px; padding: 15px; text-decoration: none; color: #3E2723; transition: all 0.3s ease; text-align: center;">
                <i class="fas fa-edit" style="color: #6f42c1; font-size: 24px; margin-bottom: 8px; display: block;"></i>
                <strong style="color: #3E2723;">Write Blog Post</strong>
            </a>
            
            <a href="{% url 'admin:core_donation_changelist' %}" style="display: block; background: linear-gradient(135deg, #F5E6D3 0%, #E8D5C4 100%); border: 2px solid #8B4513; border-radius: 8px; padding: 15px; text-decoration: none; color: #3E2723; transition: all 0.3s ease; text-align: center;">
                <i class="fas fa-chart-line" style="color: #d4af37; font-size: 24px; margin-bottom: 8px; display: block;"></i>
                <strong style="color: #3E2723;">View Donations</strong>
            </a>
        </div>
    </div>

    <!-- Main Admin Apps Grid -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
        {% if app_list %}
            {% for app in app_list %}
                <div style="background: white; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.1); overflow: hidden;">
                    <div style="background: linear-gradient(135deg, #8B4513 0%, #6F3410 100%); color: white; padding: 20px;">
                        <h3 style="color: #FFD700; margin: 0; font-size: 18px; font-weight: 600; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">
                            {% if app.name == 'Farmers' %}
                                <i class="fas fa-seedling" style="margin-right: 8px;"></i>
                            {% elif app.name == 'Core' %}
                                <i class="fas fa-cogs" style="margin-right: 8px;"></i>
                            {% elif app.name == 'Blog' %}
                                <i class="fas fa-blog" style="margin-right: 8px;"></i>
                            {% elif app.name == 'Events' %}
                                <i class="fas fa-calendar" style="margin-right: 8px;"></i>
                            {% elif app.name == 'Accounts' %}
                                <i class="fas fa-users-cog" style="margin-right: 8px;"></i>
                            {% elif app.name == 'Shop' %}
                                <i class="fas fa-shopping-cart" style="margin-right: 8px;"></i>
                            {% elif app.name == 'Programs' %}
                                <i class="fas fa-tasks" style="margin-right: 8px;"></i>
                            {% else %}
                                <i class="fas fa-folder" style="margin-right: 8px;"></i>
                            {% endif %}
                            {{ app.name }}
                        </h3>
                    </div>
                    <div style="padding: 20px;">
                        {% for model in app.models %}
                            <div style="display: flex; align-items: center; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                                <div style="flex: 1;">
                                    <strong style="color: #110906;">{{ model.name }}</strong>
                                </div>
                                <div style="display: flex; gap: 8px;">
                                    {% if model.admin_url %}
                                        <a href="{{ model.admin_url }}" style="color: #28a745; text-decoration: none; font-size: 14px; padding: 4px 8px; border-radius: 4px; background: #f8f9fa;">
                                            <i class="fas fa-list"></i> View
                                        </a>
                                    {% endif %}
                                    {% if model.add_url %}
                                        <a href="{{ model.add_url }}" style="color: #d4af37; text-decoration: none; font-size: 14px; padding: 4px 8px; border-radius: 4px; background: #f8f9fa;">
                                            <i class="fas fa-plus"></i> Add
                                        </a>
                                    {% endif %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <!-- Recent Actions -->
    {% if action_list %}
    <div style="background: white; padding: 25px; border-radius: 12px; margin-top: 30px; box-shadow: 0 4px 16px rgba(0,0,0,0.1);">
        <h2 style="color: #110906; margin: 0 0 20px 0; font-size: 20px; font-weight: 600; border-bottom: 2px solid #d4af37; padding-bottom: 10px;">
            <i class="fas fa-history" style="color: #d4af37; margin-right: 8px;"></i>
            Recent Actions
        </h2>
        <div style="max-height: 400px; overflow-y: auto;">
            {% for action in action_list %}
                <div style="display: flex; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                    <div style="flex: 1;">
                        <div style="color: #110906; font-weight: 500;">{{ action.content_type|capfirst }}</div>
                        <div style="color: #666; font-size: 14px;">{{ action.object_repr }}</div>
                    </div>
                    <div style="color: #888; font-size: 12px; text-align: right;">
                        <div>{{ action.user.get_full_name|default:action.user.username }}</div>
                        <div>{{ action.action_time|timesince }} ago</div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>

<style>
    /* Hover effects for quick actions */
    a[href*="add"]:hover,
    a[href*="changelist"]:hover {
        background: #e9ecef !important;
        border-color: #d4af37 !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
    }
</style>
{% endblock %}